let products = [
     {
      image:
      "https://rukminim1.flixcart.com/image/312/312/kmds4nk0/mobile/2/m/e/note-10-pro-max-mobhqsd1-redmi-original-imagfatnscznx75f.jpeg?q=70",
      name: "REDMI Note 10 Pro Max",
      dsc: "5020mAh Battery",
      price:  21289,
      index: 1,
      pid:1,
      },
   
    {
      image:
      "https://rukminim1.flixcart.com/image/312/312/kfvfwy80/mobile/x/p/b/poco-c3-mzb07rhin-original-imafw8zkfygmfgfr.jpeg?q=70",
      name: "poco C3",
      dsc: "No Cost EMI",
      price:  8499,
      index: 1,
      pid:2,
    },
      {
      image:
      "https://rukminim1.flixcart.com/image/312/312/kmmcrrk0/mobile/y/l/m/a53-cph2127-oppo-original-imagfgzsh5awf364.jpeg?q=70",
      name: "Oppo A53",
      dsc: "10% Offer",
      price:  13990,
      index: 1,
      pid:3,
      },

      {
      image:
      "https://rukminim1.flixcart.com/image/312/312/knrsjgw0/mobile/f/o/w/8-5g-rmx3241-realme-original-imag2d8eksc2szzy.jpeg?q=70",
      name: "realme 8 5G",
      dsc: "New Launch",
      price:  8499,
      index: 1,
      pid:4,
      },

      {
      image:
      "https://rukminim1.flixcart.com/image/416/416/kq43iq80/mobile/b/t/n/s20-fe-5g-sm-g781b-ds-samsung-original-imag47fdfgmg2gnh.jpeg?q=70",
      name: "SAMSUNG S20 FE 5G",
      dsc: "4500mAh Battery",
      price:  56990,
      index: 1,
      pid:5,
      },

      {
      image:
      "https://rukminim1.flixcart.com/image/312/312/kq6yefk0/mobile/b/2/f/11-lite-m2101k9ai-mi-original-imag496egxryygvz.jpeg?q=70",
      name: "Mi 11 Lite",
      dsc: "4250mAh Battery",
      price:  21999,
      index: 1,
      pid:6,
      },

      {
      image:
      "https://rukminim1.flixcart.com/image/312/312/knm2s280/mobile/v/l/u/hot-10-play-x688b-infinix-original-imag29hfaedkgdfe.jpeg?q=70",
      name: "Infinix Hot 10 Play",
      dsc: "6000mAh Battery",
      price:  8999,
      index: 1,
      pid:7,
      },
     
      {
      image:
      "https://rukminim1.flixcart.com/image/612/612/k0vbgy80pkrrdj/speaker/mobile-tablet-speaker/4/n/n/boat-stone-grenade-original-imafg96ffpnpgdv4.jpeg?q=70",
      name: "boAt Stone Grenade 5 W",
      dsc: "Portable Bluetooth Speaker",
      price:  1599,
      index: 1,
      pid:8,
      },

      {
      image:
      "https://rukminim1.flixcart.com/image/612/612/kfpq5jk0-0/speaker/mobile-tablet-speaker/i/g/t/jblgoplusblkeu-jbl-original-imafw3r9a7mmfgkm.jpeg?q=70",
      name: "JBL Go PLUS",
      dsc: "Portable Bluetooth Speaker",
      price:  1691,
      index: 1,
      pid:9,
      },

      {
      image:
      "https://rukminim1.flixcart.com/image/416/416/jl6wjgw0/speaker-refurbished/f/h/q/u-f-203g-f-d-original-imaf8dugy4bbuxkr.jpeg?q=70",
      name: "F&D 203G 11 W",
      dsc: "Portable Laptop/Desktop Speaker",
      price:  1999,
      index: 1,
      pid:10,
      },

      {
      image:
      "https://rukminim1.flixcart.com/image/416/416/kbqu4cw0/headphone/i/t/x/airdopes-381-boat-original-imaftf76nvezbhyk.jpeg?q=70",
      name: "boAt Airdopes with",
      dsc: "ASAP charge Bluetooth Headset",
      price:  1499,
      index: 1,
      pid:11,
      },

      {
      image:
      "https://rukminim1.flixcart.com/image/612/612/kjem3rk0-0/headphone/6/h/l/airbass-combuds-boult-audio-original-imafyz879qaqszu8.jpeg?q=70",
      name: "Boult Audio AirBass",
      dsc: "Combuds Bluetooth Headset",
      price:  2999,
      index: 1,
      pid:12,
      },

      {
      image:
      "https://rukminim1.flixcart.com/image/612/612/k3ncakw0pkrrdj/headphone/g/t/q/jbl-t500bt-original-imafjf6zmfturzd4.jpeg?q=70",
      name: "JBL T500BT",
      dsc: "Limitted offer",
      price:  2979,
      index: 1,
      pid:13,
      },

      {
      image:
      "https://rukminim1.flixcart.com/image/416/416/ki3gknk0/memory-card/microsdhc/v/h/z/sandisk-sdsqua4-032g-gn6mn-original-imafxyzwgscpjxb9.jpeg?q=70",
      name: "SanDisk Ultra 32 GB",
      dsc: "Top deal",
      price:  499,
      index: 1,
      pid:14,
          },
     { image:
        "https://rukminim1.flixcart.com/image/495/594/kl6wx3k0/t-shirt/y/n/i/s-bbt-try-this-original-imagydarhsryeahn.jpeg?q=50",
      name: "T-Shirts",
      dsc: "Up to 40% OF",
      price:  299,
      index: 1,
      pid:15,
    },
    {
      image:
        "https://rukminim1.flixcart.com/image/495/594/k44hksw0/t-shirt/m/t/r/m-dv24solidmustard-diversify-original-imafkbzvhcn3vgs7.jpeg?q=50",
      name: "T-Shirts",
      dsc: "Up to 40% OF",
      price:   199,
      index: 1,
      pid:16,
    },
    {
      image:
        "https://rukminim1.flixcart.com/image/612/612/khdqnbk0/cap/h/v/u/free-luxero-black-beanie-knotyy-original-imafxerwqft8uzmz.jpeg?q=70",
      name: "cap",
      dsc: "Up to 40% OF",
      price:  249,
      index: 1,
      pid:17,
    },
    {
      image:
        "https://rukminim1.flixcart.com/image/612/612/jxw5g280/cap/v/e/2/free-mercdes-red-001-jannat-fashion-original-imaf4ehf96zwu5qu.jpeg?q=70",
      name: "super cap",
      dsc: "Up to 40% OF",
      price:  269,
      index: 1,
      pid:18,
    },
    {
      image:
        "https://rukminim1.flixcart.com/image/495/594/kosxzm80/jean/g/v/3/36-pjdnpskpk94859-peter-england-original-imag35v3dwjn5wks.jpeg?q=50",
      name: "jeans",
      dsc: "Up to 30% OF",
      price:  2199,
      index: 1,
      pid: 19,
    },
    {
      image:
        "https://rukminim1.flixcart.com/image/495/594/k3ncakw0pkrrdj/shirt/8/g/u/l-a3-liner-1-sur-t-original-imafmqhfdzp8fxhh.jpeg?q=50",
      name: "shirt",
      dsc: "Up to 30% OF",
      price:  1299,
      index: 1,
      pid:20,
    },
    {
      image:
        "https://rukminim1.flixcart.com/image/495/594/kdnf98w0hlty2aw-0/short/x/f/j/xxl-1-fc3017-fastcolors-original-imafuhwg2yfyxjye.jpeg?q=50",
      name: "short",
      dsc: "Up to 30% OF",
      price: 299,
      index: 1,
      pid:21,
    },
    {
      image:
        "https://rukminim1.flixcart.com/image/612/612/kmkxbww0/hammock-swing/x/a/a/white-hammock-swing-hanging-chair-swingzy-original-imagfg866rvdhsga.jpeg?q=70",
      name: "swing chair",
      dsc: "Furniture Bestsellers",
      price:  1159,
      index: 1,
      pid:22,
    },
    {
      image:
        "https://rukminim1.flixcart.com/image/612/612/klcmoi80/bean-bag-cover/a/i/1/xl-xl-bean-bag-cover-without-beans-black-shira-24-original-imagyhxg4ynyjfzf.jpeg?q=70",
      name: "bean bag cover",
      dsc: "Furniture Bestseller",
      price:  1593,
      index: 1,
      pid:23,
    },
    {
      image:
        "https://rukminim1.flixcart.com/image/612/612/kkprmvk0/sofa-sectional/w/b/6/symmetrical-grey-cotton-ga-sf-01-furinno-natural-finish-original-imagyy2jswj7mhyh.jpeg?q=70",
      name: "Sofa",
      dsc: "Furniture Bestsellers",
      price:  5159,
      index: 1,
      pid:24,
    },
    {
      image:
        "https://rukminim1.flixcart.com/image/612/612/kf4ajrk0/rack-shelf/5/p/7/tv-console-unit-black-brown-furnifry-original-imafvnfkkusenjet.jpeg?q=70",
      name: "Tv Stand",
      dsc: "Furniture Bestsellers",
      price:  3159,
      index: 1,
      pid:25,
    },
    {
      image:
        "https://rukminim1.flixcart.com/image/612/612/koixwnk0/office-study-chair/c/5/c/1-pp-polypropylene-marcozy-001-savya-home-original-imag2ywzhppcqz6t.jpeg?q=70",
      name: "Chair",
      dsc: "Furniture Bestsellers",
      price:  959,
      index:25,

pid:26,    },
    {
      image:
        "https://rukminim1.flixcart.com/image/612/612/k6jnfrk0/mirror/j/j/z/phwmset0003-flipkart-perfect-homes-original-imafzyu7tt8bwfqy.jpeg?q=70",
      name: "Wall mirrors",
      dsc: "Furniture Bestsellers",
      price:  599,
      index: 1,
      pid:27,
    },
     {
      image:
        "https://rukminim1.flixcart.com/image/612/612/jog2nbk0/bed/9/z/b/queen-columbia-particle-board-kosmo-glenn-queen-bed-with-box-original-imafawjujqrqsefu.jpeg?q=70",
      name: "Bed",
      dsc: "Furniture Bestsellers",
      price:  5559,
      index: 1,
      pid:28,
    },
];
   let arr2 = [];
 let redd = document.getElementById("redd");
 var cartitems;

function showmenu() {
 
  localStorage.setItem("products", JSON.stringify(products));

  let data = JSON.parse(localStorage.getItem("products"));
  

  let menu = document.getElementById("menu");
  let r1 = document.getElementById("r1");
  let r2 = document.getElementById("r2");
  let r3 = document.getElementById("r3");
  let r4 = document.getElementById("r4");

}






function cartnos() {
  let itemsinCart = JSON.parse(localStorage.getItem("productsInCart"))

  if (itemsinCart.length != 0) {
        redd.style.display = "block";
    document.querySelector("#redd").textContent = itemsinCart.length;
  }
  else {
    redd.style.display = "none"
  }
  console.log("triggered")
}
cartnos()

function totalcost() {
 
  let cartcost = parseInt(localStorage.getItem("totalcost"));
  
  let itemsinCart = JSON.parse(localStorage.getItem("productsInCart"))

  if (itemsinCart.length == 0) {
    localStorage.setItem("totalcost", 0)
  }
  else {
    let total = 0;

    for (let j = 0; j < itemsinCart.length; j++) {
      total += Number(itemsinCart[j].index*itemsinCart[j].price);
    }
    localStorage.setItem("totalcost", total)
  }
  
}

totalcost()



function displaycart() {
let cartitem = localStorage.getItem("productsInCart") 
  cartitems = JSON.parse(cartitem);
arr2.push(cartitems);

 

    let productcontainer = document.querySelector(".products");
  let cartcost = localStorage.getItem("totalcost");
  let count = 10;
    if (cartitems && productcontainer) {
        productcontainer.innerHTML = `<div class= 'line'>
                <div><h2> My cart</h2></div> <div> <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZWxsaXBzZSBjeD0iOSIgY3k9IjE0LjQ3OCIgZmlsbD0iI0ZGRTExQiIgcng9IjkiIHJ5PSIzLjUyMiIvPjxwYXRoIGZpbGw9IiMyODc0RjAiIGQ9Ik04LjYwOSA3LjAxYy0xLjA4IDAtMS45NTctLjgyNi0xLjk1Ny0xLjg0NSAwLS40ODkuMjA2LS45NTguNTczLTEuMzA0YTIuMDIgMi4wMiAwIDAgMSAxLjM4NC0uNTRjMS4wOCAwIDEuOTU2LjgyNSAxLjk1NiAxLjg0NCAwIC40OS0uMjA2Ljk1OS0uNTczIDEuMzA1cy0uODY0LjU0LTEuMzgzLjU0ek0zLjEzIDUuMTY1YzAgMy44NzQgNS40NzkgOC45MjIgNS40NzkgOC45MjJzNS40NzgtNS4wNDggNS40NzgtOC45MjJDMTQuMDg3IDIuMzEzIDExLjYzNCAwIDguNjA5IDAgNS41ODMgMCAzLjEzIDIuMzEzIDMuMTMgNS4xNjV6Ii8+PC9nPjwvc3ZnPg==" > <label >Deliver to</label> <input  /></div> 
          </div><hr></hr>`;
        Object.values(cartitems).map(item => {
            productcontainer.innerHTML +=
                `
                <div id="tab">
      
                <div class="product">
                <div><img class="pic" src= "${item.image}" /></div>
                <div class="group">

                <div>Product:<h2> ${item.name}</h2></div>
                <div> <img class="assured" style="width: 60px; height: 20px" src="https://static-assets-web.flixcart.com/www/linchpin/fk-cp-zion/img/fa_62673a.png" alt="" /></div>
                 <div class="price"><div>₹${item.price}</div> &nbsp  &nbsp<div>17% Off 2 offers applied</div>
                 <div style="color: gray">Seller: Retailnet</div> <div style="color: black">${count} Day Return Policy</div> <div style="color: black">Cash On Delivery Available</div>
                 <button class="dlt" onclick="removit(${item.pid})">Remove Item</button>
                 </div>
                </div><div>Delivery by Thu Jul 29 | Free</div> </div> 
              <div>
              
              
              
              <div id="abc">
                  <div style="display: flex;flex-direction: row;margin-left: -90px;">
                  <h4>Quantity:</h4>
                    <div style="width: 20px; margin-top:10px"><span>${item.index}</span></div>
                
                  </div>
       
            
            </div></div><hr>
</div>
  </div>
`
          count = count + 2;
        });
      productcontainer.innerHTML += `<div class="baskettotalcontainer">  <h2 class="baskettotal">Basket Total &nbsp ₹${cartcost}</h2>
         <div class="cont4"><button id="done" onclick="pay()">PLACE ORDER</button></div>
        </div>`
            ;

    }

}
//delete itm

function pay() {
  let done = document.getElementById("done");
  window.location.href = "checkout";
}

// remove itm
let amol = document.getElementById("redd");
amol.addEventListener("onclick", displaycart());


  function removit(pid) {
  let updatedCart = [];
   let prod = JSON.parse(localStorage.getItem("productsInCart"));
    for (var k in prod) {
     
      if (prod[k].pid != pid) {
        updatedCart.push(prod[k])
      }

    }
        
    localStorage.setItem("productsInCart",JSON.stringify(updatedCart));

    totalcost();
    displaycart();
    cartnos()
  }

function goindex() {
    window.location.href = "index";
  }


